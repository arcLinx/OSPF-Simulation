#include<stdio.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<pthread.h>
pthread_t thread[2];

/*---- Create a passive UDP socket for the Server A----*/


/*Global variables for creating the socket*/
typedef struct address{
	int serverAIP;
	int serverAPort;
}my_address;


/*---- Thread for reading the file of the server when it is boot up ---*/
void *serverBoot(void *arg)
{
	// Read the file Servera.txt
	return NULL;
}

/*----- Thread for establishing a connection*/
void *serverConnect(void *arg)
{
	//Establish a UDP socket
	int sd;
	char buf[1024];
	sd = socket(AF_INET,SOCK_DGRAM,0); // The domain arguement specifies the family of the communiation used and type argument tells which protocol to use (TCP/ UDP) and protocol arguement tells that this 										particular socket uses which differenent protocol types
	my_address* addr = NULL;
	addr->serverAIP = 1234;
	addr->serverAPort = 90;
	
	//Address of the client
	my_address *client_addr = malloc(sizeof(my_address));
	int client_addrlen =  0;

	//Bind the socket descriptor
	if( bind(sd, addr,sizeof(my_address)) == -1)
		printf("Failed to bind!!\n");
	recvfrom(sd,buf,1,client_addrlen);
	send(sd,buf,0);
	return NULL;
}

void *serverSend(void *arg)
{
	connect();
	send();

	return NULL;
}
int main()
{
	
	
	/*pthread_create(&thread[0], NULL, serverBoot, NULL);*/
	pthread_create(&thread[1], NULL, serverConnect, NULL);
	/*pthread_create(&thread[2], NULL, serverSend,NULL);*/


	
	//pthread_join(thread[0]);
	pthread_join(thread[1],NULL);
	//pthread_join(thread[2]);
	
	return 0;
}
